<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Visualize your life in emojis. See how you spend your time on activities from now until age 80.">
    <meta name="theme-color" content="#5DACB3">

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://findfreetime.com/life.html">
    <meta property="og:title" content="Your Life in Emojis - Free Time">
    <meta property="og:description" content="Visualize your life in emojis. See how you spend your time on activities from now until age 80.">
    <meta property="og:image" content="https://findfreetime.com/meta.png">

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="https://findfreetime.com/meta.png">

    <!-- Google tag (gtag.js) - loaded after consent -->
    <script>
      function loadGoogleAnalytics() {
        var script = document.createElement('script');
        script.async = true;
        script.src = 'https://www.googletagmanager.com/gtag/js?id=G-3XH6ZL37DY';
        document.head.appendChild(script);

        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-3XH6ZL37DY');
      }

      // Check if user has already consented
      if (localStorage.getItem('cookieConsent') === 'accepted') {
        loadGoogleAnalytics();
      }
    </script>
    <title>Your Life in Emojis - Free Time</title>
    <link rel="icon" type="image/png" href="favicon.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lexend:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        .life-page-body {
            font-family: 'Lexend', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: white;
            min-height: 100vh;
            padding: 20px;
            padding-top: 20px;
            padding-bottom: 40px;
            color: #333;
        }

        .site-header {
            max-width: 900px;
            margin: 0 auto 10px;
            padding: 8px 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: none;
            border-bottom: none;
        }

        .header-nav {
            display: flex;
            gap: 20px;
        }

        .header-link {
            color: #333;
            text-decoration: none;
            font-size: 14px;
            font-weight: 500;
        }

        .header-link:hover {
            color: #5fc3c8;
            text-decoration: none;
        }

        .life-container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            padding: 40px;
        }

        .life-container h1 {
            text-align: center;
            color: #1d1d1f;
            margin-bottom: 10px;
            font-size: 2.5em;
        }

        .subtitle {
            text-align: center;
            color: #1d1d1f;
            margin-bottom: 20px;
            font-size: 1.1em;
        }

        .emoji-marquee {
            overflow: hidden;
            margin-bottom: 20px;
        }

        .emoji-track {
            display: inline-flex;
            animation: scroll-left 20s linear infinite;
        }

        .emoji-track span {
            font-size: 24px;
            padding: 0 10px;
        }

        @keyframes scroll-left {
            0% { transform: translateX(0); }
            100% { transform: translateX(-25%); }
        }

        .section {
            margin-bottom: 20px;
            padding: 20px;
            background: #e8f7f8;
            border-radius: 15px;
        }

        .section-title {
            font-size: 1.3em;
            color: #1d1d1f;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .section-header-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .section-header-row .section-title {
            margin-bottom: 0;
        }

        .customize-btn-small {
            padding: 6px 16px;
            background: transparent;
            color: #5fc3c8;
            border: 1px solid #5fc3c8;
            border-radius: 50px;
            cursor: pointer;
            font-size: 0.85em;
            font-weight: 600;
            transition: all 0.2s;
            font-family: 'Lexend', sans-serif;
        }

        .customize-btn-small:hover {
            background: #5fc3c8;
            color: white;
        }

        .customize-btn-small.active {
            background: #5fc3c8;
            color: white;
        }

        .section-description {
            color: #888;
            font-size: 0.85em;
            margin-bottom: 15px;
            font-style: italic;
        }

        .activity-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px 15px;
            background: white;
            border-radius: 8px;
            margin-bottom: 8px;
            gap: 15px;
            border: 1px solid #e0e0e0;
        }

        .activity-row:hover {
            border-color: #5fc3c8;
            box-shadow: 0 2px 8px rgba(95, 195, 200, 0.2);
        }

        .activity-info {
            display: flex;
            align-items: center;
            gap: 12px;
            flex: 1;
        }

        .activity-emoji {
            font-size: 28px;
            min-width: 35px;
        }

        .activity-name {
            font-weight: 600;
            font-size: 1em;
            color: #333;
        }

        .hours-stepper {
            display: flex;
            align-items: center;
            gap: 0;
        }

        .stepper-btn {
            width: 32px;
            height: 32px;
            border: 2px solid #5fc3c8;
            background: white;
            color: #5fc3c8;
            font-size: 1.2em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Lexend', sans-serif;
        }

        .stepper-btn:hover {
            background: #5fc3c8;
            color: white;
        }

        .stepper-btn.minus {
            border-radius: 50px 0 0 50px;
            border-right: none;
        }

        .stepper-btn.plus {
            border-radius: 0 50px 50px 0;
            border-left: none;
        }

        .activity-hours-input {
            width: 50px;
            padding: 6px 4px;
            border: 2px solid #5fc3c8;
            border-left: none;
            border-right: none;
            border-radius: 0;
            font-size: 0.95em;
            font-weight: 600;
            text-align: center;
            color: #5fc3c8;
            font-family: 'Lexend', sans-serif;
            height: 32px;
            box-sizing: border-box;
            -moz-appearance: textfield;
        }

        .activity-hours-input::-webkit-outer-spin-button,
        .activity-hours-input::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }

        .activity-hours-input:focus {
            outline: none;
            border-color: #5fc3c8;
        }

        .hours-label {
            color: #888;
            font-size: 0.85em;
            white-space: nowrap;
        }

        #dailyActivitiesContainer,
        #weeklyActivitiesContainer {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 8px;
        }

        .hours-feedback {
            background: white;
            padding: 10px 15px;
            border-radius: 8px;
            margin-top: 15px;
            border: 1px solid #e0e0e0;
            font-size: 0.85em;
        }

        .hours-feedback.over-24 {
            border-color: #ffc107;
            background: #fff8e1;
        }

        .hours-feedback-label {
            font-weight: 600;
            color: #888;
        }

        .hours-feedback-value {
            font-size: 1em;
            font-weight: 700;
            color: #5fc3c8;
        }

        .hours-feedback.over-24 .hours-feedback-value {
            color: #f57c00;
        }

        .hours-feedback-note {
            font-size: 0.9em;
            color: #999;
            margin-top: 3px;
        }

        .add-activity-form {
            background: white;
            padding: 15px;
            border-radius: 12px;
            border: 2px dashed #5fc3c8;
            margin-top: 15px;
        }

        .form-title {
            font-size: 1em;
            font-weight: 600;
            color: #5fc3c8;
            margin-bottom: 12px;
            text-align: center;
        }

        .form-group {
            margin-bottom: 12px;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
        }

        .form-row .form-group {
            margin-bottom: 0;
        }

        .form-label {
            display: block;
            font-weight: 600;
            color: #555;
            margin-bottom: 8px;
            font-size: 0.95em;
        }

        .emoji-selector {
            display: flex;
            gap: 6px;
            flex-wrap: wrap;
            padding: 8px;
            background: #f8f9fa;
            border-radius: 8px;
            max-height: 120px;
            overflow-y: auto;
        }

        .emoji-option {
            font-size: 24px;
            padding: 6px;
            cursor: pointer;
            border-radius: 6px;
            border: 2px solid transparent;
            transition: all 0.2s;
            background: white;
        }

        .emoji-option:hover {
            background: #5fc3c8;
            transform: scale(1.1);
        }

        .emoji-option.selected {
            border-color: #5fc3c8;
            background: #e8f7f8;
        }

        .form-input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1em;
            background: white;
            font-family: 'Lexend', sans-serif;
        }

        .form-input:focus {
            outline: none;
            border-color: #5fc3c8;
        }

        select.form-input {
            cursor: pointer;
        }

        .form-actions {
            display: flex;
            gap: 10px;
            margin-top: 12px;
        }

        .btn-add {
            flex: 1;
            padding: 12px 25px;
            background: #5fc3c8;
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            transition: all 0.3s;
            font-family: 'Lexend', sans-serif;
        }

        .btn-add:hover {
            background: #4fb4b9;
            transform: translateY(-2px);
        }

        .btn-cancel {
            padding: 12px 25px;
            background: white;
            color: #666;
            border: 2px solid #ddd;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            transition: all 0.3s;
            font-family: 'Lexend', sans-serif;
        }

        .btn-cancel:hover {
            background: #f8f9fa;
        }

        .show-add-form-btn {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #5fc3c8 0%, #4fb4b9 100%);
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1.05em;
            font-weight: 600;
            transition: all 0.3s;
            margin-top: 20px;
            font-family: 'Lexend', sans-serif;
        }

        .show-add-form-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(95, 195, 200, 0.4);
        }

        .done-customizing-btn {
            width: 100%;
            padding: 15px;
            background: #5fc3c8;
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1.05em;
            font-weight: 600;
            transition: all 0.3s;
            margin-top: 20px;
            font-family: 'Lexend', sans-serif;
        }

        .done-customizing-btn:hover {
            background: #4fb4b9;
            transform: translateY(-2px);
        }

        .results {
            margin-top: 20px;
            padding: 20px;
            background: linear-gradient(135deg, rgba(95, 195, 200, 0.08) 0%, rgba(79, 180, 185, 0.08) 100%);
            border-radius: 15px;
        }

        .visualization {
            margin-top: 15px;
            padding: 0;
            background: transparent;
        }

        .emoji-container {
            margin-top: 20px;
            padding: 20px 0;
            background: transparent;
            overflow-x: auto;
        }

        .viz-activity-row {
            display: flex;
            flex-direction: column;
            margin-bottom: 20px;
            gap: 8px;
        }

        .viz-activity-label {
            font-weight: 600;
            font-size: 1.1em;
            color: #333;
            text-align: left;
        }

        .emoji-band {
            display: flex;
            flex-wrap: wrap;
            line-height: 1.4;
            gap: 2px;
        }

        .emoji-week {
            font-size: 18px;
            display: inline-block;
        }

        .years-emoji-grid {
            display: grid;
            grid-template-columns: repeat(10, auto);
            gap: 20px;
            justify-content: center;
            padding: 10px 0;
        }

        .years-emoji-grid .emoji-week {
            font-size: 24px;
        }

        .years-emoji-key {
            display: grid;
            grid-template-columns: repeat(4, auto);
            gap: 8px 48px;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid #e0e0e0;
            text-align: left;
            justify-content: center;
        }

        .key-item {
            font-size: 14px;
            color: #666;
            display: flex;
            flex-direction: column;
        }

        .key-item .key-years {
            font-size: 12px;
            color: #999;
        }

        .chart-header {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
            margin-bottom: 10px;
        }

        .chart-title {
            text-align: center;
            font-size: 1.3em;
            font-weight: 700;
            color: #333;
        }

        .chart-subtitle {
            text-align: center;
            color: #666;
            font-size: 0.9em;
        }

        .view-toggle {
            display: flex;
            gap: 0;
            background: #f0f0f0;
            border-radius: 8px;
            padding: 4px;
        }

        .view-toggle-btn {
            padding: 8px 20px;
            background: transparent;
            color: #666;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9em;
            font-weight: 600;
            transition: all 0.2s;
            font-family: 'Lexend', sans-serif;
        }

        .view-toggle-btn:hover {
            color: #5fc3c8;
        }

        .view-toggle-btn.active {
            background: white;
            color: #5fc3c8;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .share-toggle {
            display: flex;
            gap: 0;
            background: #f0f0f0;
            border-radius: 8px;
            padding: 4px;
            margin: 0 auto 15px auto;
            width: fit-content;
        }

        .share-toggle-btn {
            padding: 8px 20px;
            background: transparent;
            color: #666;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9em;
            font-weight: 600;
            transition: all 0.2s;
            font-family: 'Lexend', sans-serif;
        }

        .share-toggle-btn:hover {
            color: #5fc3c8;
        }

        .share-toggle-btn.active {
            background: white;
            color: #5fc3c8;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .cta-title {
            font-size: 2em;
            font-weight: 700;
            color: #1d1d1f;
            margin-bottom: 15px;
            line-height: 1.2;
        }

        .cta-subtitle {
            font-size: 1.1em;
            color: #666;
            line-height: 1.6;
            margin-bottom: 25px;
            max-width: 500px;
            margin-left: auto;
            margin-right: auto;
        }

        .cta-btn {
            display: inline-block;
            padding: 18px 50px;
            background: #5DACB3;
            color: white;
            text-decoration: none;
            border-radius: 50px;
            font-weight: 600;
            font-size: 1.15em;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(93, 172, 179, 0.3);
        }

        .cta-btn:hover {
            background: #4a9ba2;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(93, 172, 179, 0.4);
            outline: none;
            text-decoration: none;
        }

        .phone-section-wrapper {
            background: white;
            padding: 10px 20px 10px 20px;
        }

        .phone-section {
            max-width: 900px;
            margin: 0 auto;
            padding: 15px 30px 30px 30px;
            background: white;
            border-radius: 20px;
        }

        .section-header {
            font-size: 1.8em;
            font-weight: 700;
            color: #1d1d1f;
            margin-top: 0;
            margin-bottom: 20px;
            text-align: center;
        }

        .phone-impact-content {
            font-size: 1.1em;
            line-height: 1.6;
            color: #1d1d1f;
        }

        .phone-impact-content strong {
            font-weight: 700;
        }

        .emoji-comparison {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            margin: 25px 0;
            flex-wrap: wrap;
        }

        .emoji-comparison-side {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 5px;
            justify-items: center;
            font-size: 2em;
        }

        .emoji-comparison-equals {
            font-size: 1.5em;
            font-weight: 700;
            color: #1d1d1f;
        }

        .emoji-comparison-legend {
            text-align: center;
            font-size: 0.85em;
            color: #666;
            margin-top: 10px;
        }

        .cta-content {
            text-align: center;
            padding-top: 30px;
            margin-top: 30px;
        }

        .insights-section {
            margin-top: 40px;
            padding: 30px;
            background: #FFF6C6;
            border-radius: 16px;
        }

        .insights-header {
            font-size: 1.8em;
            font-weight: 700;
            color: #1d1d1f;
            margin-top: 0;
            margin-bottom: 20px;
            text-align: center;
        }

        .share-section {
            margin-top: 40px;
            padding-top: 30px;
            border-top: 1px solid #e0e0e0;
        }

        .share-section-wrapper {
            background: white;
            padding: 0 20px 50px 20px;
        }

        .share-box {
            max-width: 900px;
            margin: 0 auto;
            padding: 5px 30px 30px 30px;
            background: white;
            border-radius: 20px;
            border: 2px solid #5fc3c8;
        }

        .share-title {
            font-size: 1.8em;
            font-weight: 700;
            color: #1d1d1f;
            margin-top: 0;
            margin-bottom: 10px;
            text-align: center;
        }

        .share-description {
            text-align: center;
            color: #666;
            margin-bottom: 20px;
            font-size: 0.95em;
        }

        .share-preview {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 12px;
            font-family: monospace;
            font-size: 0.9em;
            line-height: 1.8;
            margin-bottom: 20px;
            white-space: pre-wrap;
            word-break: break-word;
            max-height: 200px;
            overflow-y: auto;
            border: 1px solid #e0e0e0;
        }

        .copy-btn {
            display: block;
            margin: 0 auto;
            padding: 12px 30px;
            background: #5fc3c8;
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            transition: all 0.3s;
            font-family: 'Lexend', sans-serif;
        }

        .copy-btn:hover {
            background: #4fb4b9;
            transform: translateY(-2px);
        }

        .copy-success {
            text-align: center;
            margin-top: 15px;
            color: #28a745;
            font-weight: 600;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .copy-success.show {
            opacity: 1;
        }

        .powered-by-section {
            display: none;
            padding: 40px 20px;
            text-align: center;
        }

        .powered-by-container {
            max-width: 600px;
            margin: 0 auto;
        }

        .powered-by-title {
            color: #1d1d1f;
            font-size: 1.5em;
            font-weight: 700;
            margin-bottom: 15px;
        }

        .powered-by-description {
            color: #1d1d1f;
            font-size: 1em;
            line-height: 1.6;
            margin-bottom: 20px;
        }

        .powered-by-btn {
            display: inline-block;
            background: #5DACB3;
            color: white;
            padding: 12px 30px;
            border-radius: 25px;
            font-weight: 600;
            text-decoration: none;
            transition: all 0.3s;
        }

        .powered-by-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(93, 172, 179, 0.3);
            text-decoration: none;
            background: #4a9ba2;
            color: white;
            outline: none;
        }

        .age-section-simple {
            padding: 15px 25px;
            text-align: center;
        }

        .age-input-inline {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
        }

        .age-label {
            font-weight: 600;
            color: #1d1d1f;
            font-size: 1em;
        }

        .age-input-simple {
            width: 50px;
            padding: 6px 4px;
            border: 2px solid #5fc3c8;
            border-left: none;
            border-right: none;
            border-radius: 0;
            font-size: 0.95em;
            font-weight: 600;
            text-align: center;
            color: #5fc3c8;
            font-family: 'Lexend', sans-serif;
            height: 32px;
            box-sizing: border-box;
            -moz-appearance: textfield;
        }

        .age-input-simple::-webkit-outer-spin-button,
        .age-input-simple::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }

        .age-input-simple:focus {
            outline: none;
            border-color: #5fc3c8;
        }

        .age-input-simple:focus {
            outline: none;
            border-color: #5fc3c8;
        }

        .age-unit {
            color: #666;
            font-size: 1em;
        }

        .age-description {
            margin-top: 8px;
            font-size: 0.85em;
            color: #888;
            font-style: italic;
        }

        .calculate-btn {
            display: block;
            margin: 20px auto 0 auto;
            padding: 18px 50px;
            background: #5DACB3;
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-size: 1.2em;
            font-weight: 600;
            transition: all 0.3s;
            font-family: 'Lexend', sans-serif;
            box-shadow: 0 4px 15px rgba(93, 172, 179, 0.3);
        }

        .calculate-btn .mobile-break {
            display: none;
        }

        .calculate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(93, 172, 179, 0.4);
            background: #4a9ba2;
        }

        .results-container {
            display: none;
        }

        .results-container.visible {
            display: block;
        }

        .hidden {
            display: none;
        }

        /* Mobile scroll picker */
        .picker-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            justify-content: center;
            align-items: flex-end;
        }

        .picker-overlay.show {
            display: flex;
        }

        .picker-container {
            background: white;
            width: 100%;
            border-radius: 20px 20px 0 0;
            padding: 20px;
            padding-bottom: 40px;
        }

        .picker-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #e0e0e0;
        }

        .picker-title {
            font-size: 1.1em;
            font-weight: 600;
            color: #333;
        }

        .picker-done {
            background: #5fc3c8;
            color: white;
            border: none;
            padding: 8px 20px;
            border-radius: 8px;
            font-weight: 600;
            font-size: 1em;
            cursor: pointer;
            font-family: 'Lexend', sans-serif;
        }

        .picker-wrapper {
            position: relative;
        }

        .picker-scroll-container {
            height: 200px;
            overflow-y: auto;
            scroll-snap-type: y mandatory;
            -webkit-overflow-scrolling: touch;
        }

        .picker-option {
            height: 50px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5em;
            font-weight: 600;
            color: #999;
            scroll-snap-align: center;
            cursor: pointer;
            transition: all 0.15s;
        }

        .picker-option.selected {
            color: #5fc3c8;
            font-size: 1.8em;
        }

        .picker-highlight {
            position: absolute;
            top: 50%;
            left: 10%;
            right: 10%;
            height: 50px;
            transform: translateY(-50%);
            border-top: 2px solid #5fc3c8;
            border-bottom: 2px solid #5fc3c8;
            pointer-events: none;
            z-index: 10;
        }

        .picker-fade-top,
        .picker-fade-bottom {
            position: absolute;
            left: 0;
            right: 0;
            height: 75px;
            pointer-events: none;
            z-index: 5;
        }

        .picker-fade-top {
            top: 0;
            background: linear-gradient(to bottom, white 0%, transparent 100%);
        }

        .picker-fade-bottom {
            bottom: 0;
            background: linear-gradient(to top, white 0%, transparent 100%);
        }

        @media (max-width: 768px) {
            #dailyActivitiesContainer,
            #weeklyActivitiesContainer {
                grid-template-columns: 1fr;
            }

            .life-container {
                padding: 20px;
            }

            .life-container h1 {
                font-size: 1.8em;
            }

            .section-header-row {
                flex-wrap: wrap;
                gap: 8px;
            }

            .section-header-row .section-title {
                flex: 1;
                min-width: 120px;
            }

            .activity-emoji {
                font-size: 24px;
                min-width: 30px;
            }

            .activity-name {
                font-size: 0.9em;
            }

            .activity-hours-input {
                width: 60px;
                padding: 5px 8px;
                font-size: 0.9em;
                cursor: pointer;
                background: #f8f9fa;
            }

            .stepper-btn {
                display: none;
            }

            .viz-activity-row {
                margin-bottom: 15px;
                gap: 5px;
            }

            .viz-activity-label {
                font-size: 0.95em;
            }

            .emoji-week {
                font-size: 16px;
            }

            .phone-section-wrapper {
                padding: 30px 15px;
            }

            .phone-section {
                padding: 20px;
            }

            .section-header {
                font-size: 1.4em;
                margin-bottom: 15px;
            }

            .phone-impact-content {
                padding: 20px;
                margin-bottom: 25px;
            }

            .cta-title {
                font-size: 1.3em;
                margin-bottom: 12px;
            }

            .cta-subtitle {
                font-size: 0.95em;
                margin-bottom: 20px;
            }

            .cta-btn {
                padding: 14px 30px;
                font-size: 1em;
            }

            .share-section-wrapper {
                padding: 0 15px 30px 15px;
            }

            .share-box {
                padding: 20px;
            }

            .calculate-btn .mobile-break,
            .cta-btn .mobile-break {
                display: block;
            }

            .emoji-comparison {
                flex-direction: column;
            }

            .years-emoji-key {
                grid-template-columns: repeat(2, auto);
            }
        }

        @media (max-width: 480px) {
            .life-container {
                padding: 15px;
            }

            .life-container h1 {
                font-size: 1.5em;
            }

            .emoji-week {
                font-size: 14px;
            }
        }

        /* Instagram Share Image Styles */
        .instagram-share {
            width: 1080px;
            height: 1920px;
            background: linear-gradient(180deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            padding: 100px 60px;
            display: flex;
            flex-direction: column;
            align-items: center;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            box-sizing: border-box;
        }

        .instagram-share-title {
            font-size: 64px;
            font-weight: 700;
            color: #ffffff;
            text-align: center;
            margin-bottom: 60px;
        }

        .instagram-share-grid {
            display: grid;
            gap: 12px;
            justify-content: center;
            margin-bottom: 60px;
        }

        .instagram-share-grid span {
            font-size: 48px;
            text-align: center;
        }

        .instagram-share-legend {
            display: grid;
            grid-template-columns: repeat(3, auto);
            gap: 20px 50px;
            margin-top: auto;
            margin-bottom: 60px;
        }

        .instagram-legend-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }

        .instagram-legend-item .emoji-name {
            font-size: 28px;
            color: #ffffff;
        }

        .instagram-legend-item .emoji-years {
            font-size: 22px;
            color: #aaaaaa;
        }

        .instagram-share-footer {
            font-size: 28px;
            color: #888888;
            margin-top: auto;
        }

        .instagram-btn {
            margin-top: 10px;
            background: linear-gradient(135deg, #833ab4 0%, #fd1d1d 50%, #fcb045 100%);
        }

        .instagram-btn:hover {
            background: linear-gradient(135deg, #6d2f96 0%, #d41717 50%, #d99a3b 100%);
        }
    </style>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
</head>
<body>
    <div class="life-page-body">
        <header class="site-header">
            <a href="/" class="header-link">Home</a>
            <nav class="header-nav">
                <a href="/about" class="header-link">About</a>
                <a href="/contact" class="header-link">Contact</a>
            </nav>
        </header>
        <div class="life-container">
            <h1>üìä Your Life in Emojis</h1>
            <p class="subtitle">Visualize the rest of your life</p>

            <div class="emoji-marquee">
                <div class="emoji-track">
                    <span>üò¥</span><span>üíº</span><span>üì±</span><span>üç¥</span><span>üöó</span><span>üì∫</span><span>üöø</span><span>üí™</span><span>üë´</span><span>‚ù§Ô∏è</span><span>üè†</span><span>üé®</span><span>üë®‚Äçüç≥</span><span>üßπ</span><span>üò¥</span><span>üíº</span><span>üì±</span><span>üç¥</span><span>üöó</span><span>üì∫</span><span>üöø</span><span>üí™</span><span>üë´</span><span>‚ù§Ô∏è</span><span>üè†</span><span>üé®</span><span>üë®‚Äçüç≥</span><span>üßπ</span><span>üò¥</span><span>üíº</span><span>üì±</span><span>üç¥</span><span>üöó</span><span>üì∫</span><span>üöø</span><span>üí™</span><span>üë´</span><span>‚ù§Ô∏è</span><span>üè†</span><span>üé®</span><span>üë®‚Äçüç≥</span><span>üßπ</span><span>üò¥</span><span>üíº</span><span>üì±</span><span>üç¥</span><span>üöó</span><span>üì∫</span><span>üöø</span><span>üí™</span><span>üë´</span><span>‚ù§Ô∏è</span><span>üè†</span><span>üé®</span><span>üë®‚Äçüç≥</span><span>üßπ</span>
                </div>
            </div>

            <!-- Daily Activities Section -->
            <div class="section">
                <div class="section-header-row">
                    <div class="section-title">Daily Activities</div>
                    <button class="customize-btn-small" id="customizeDailyBtn">Customize</button>
                </div>
                <div class="section-description">Write 0 hours if you don't do an activity</div>

                <div id="addDailyActivityForm" class="add-activity-form hidden">
                    <div class="form-title">Add Daily Activity</div>
                    <div class="form-group">
                        <label class="form-label">Choose Emoji</label>
                        <div class="emoji-selector" id="dailyEmojiSelector"></div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Activity Name</label>
                            <input type="text" class="form-input" id="dailyActivityName" placeholder="e.g., Reading, Meditation">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Hours Per Day</label>
                            <input type="number" class="form-input" id="dailyActivityHours" min="0" max="24" step="0.5" value="1">
                        </div>
                    </div>
                    <div class="form-actions">
                        <button class="btn-cancel" id="cancelDailyBtn">Cancel</button>
                        <button class="btn-add" id="addDailyBtn">Add Activity</button>
                    </div>
                </div>

                <div id="dailyActivitiesContainer"></div>
            </div>

            <!-- Weekly Activities Section -->
            <div class="section">
                <div class="section-header-row">
                    <div class="section-title">Weekly Activities</div>
                    <button class="customize-btn-small" id="customizeWeeklyBtn">Customize</button>
                </div>
                <div class="section-description">Activities you do each week</div>

                <div id="addWeeklyActivityForm" class="add-activity-form hidden">
                    <div class="form-title">Add Weekly Activity</div>
                    <div class="form-group">
                        <label class="form-label">Choose Emoji</label>
                        <div class="emoji-selector" id="weeklyEmojiSelector"></div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Activity Name</label>
                            <input type="text" class="form-input" id="weeklyActivityName" placeholder="e.g., Exercise, Hobbies">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Hours Per Week</label>
                            <input type="number" class="form-input" id="weeklyActivityHours" min="0" max="168" step="0.5" value="1">
                        </div>
                    </div>
                    <div class="form-actions">
                        <button class="btn-cancel" id="cancelWeeklyBtn">Cancel</button>
                        <button class="btn-add" id="addWeeklyBtn">Add Activity</button>
                    </div>
                </div>

                <div id="weeklyActivitiesContainer"></div>

                <div class="hours-feedback" id="hoursFeedback">
                    <span class="hours-feedback-label">Total: </span>
                    <span class="hours-feedback-value" id="totalHoursValue">24.0</span>
                    <span class="hours-feedback-note" id="hoursFeedbackNote"></span>
                </div>
            </div>

            <!-- Age Section -->
            <div class="age-section-simple">
                <div class="age-input-inline">
                    <label for="age" class="age-label">Your age:</label>
                    <div class="hours-stepper">
                        <button type="button" class="stepper-btn minus" id="ageMinusBtn">‚àí</button>
                        <input type="number" class="age-input-simple" id="age" min="1" max="100" value="30">
                        <button type="button" class="stepper-btn plus" id="agePlusBtn">+</button>
                    </div>
                    <span class="age-unit">years old</span>
                </div>
                <div class="age-description">We'll calculate your life until age 80</div>
            </div>

            <button class="calculate-btn" id="calculateBtn">Calculate Your<br class="mobile-break"> Life in Emojis</button>

            <!-- Results Section -->
            <div class="results" id="results" style="display: none;">
                <div class="visualization">
                    <div class="chart-header">
                        <div class="chart-title">Your Life in Emojis</div>
                        <div class="view-toggle">
                            <button class="view-toggle-btn active" id="yearsBtn">Years</button>
                            <button class="view-toggle-btn" id="monthsBtn">Months</button>
                            <button class="view-toggle-btn" id="weeksBtn">Weeks</button>
                        </div>
                    </div>
                    <div class="chart-subtitle" id="chartSubtitle">1 Emoji = 1 month</div>
                    <div class="emoji-container" id="emojiContainer"></div>
                </div>

                <!-- Insights Section -->
                <div class="insights-section">
                    <h2 class="insights-header">Insights</h2>
                    <div class="phone-impact-content">
                        <div id="phoneImpactText"></div>
                    </div>
                </div>

                <!-- CTA Section -->
                <div class="cta-content">
                    <h3 class="cta-title">Want to spend less time on your phone?</h3>
                    <p class="cta-subtitle">This year, make time for what matters most to you. Learn how to cut down your screen time and use your phone with intention.</p>
                    <a href="https://apps.apple.com/us/app/free-time-mindful-screen-time/id6747683001" class="cta-btn">
                        Download the<br class="mobile-break"> Free Time app
                    </a>
                </div>

                <!-- Share Section -->
                <div class="share-section">
                    <h2 class="share-title">Share Your Life in Emojis</h2>
                    <p class="share-description">Copy and paste to share on social media</p>
                    <div class="share-toggle">
                        <button class="share-toggle-btn" id="shareMonthsBtn">Months</button>
                        <button class="share-toggle-btn active" id="shareYearsBtn">Years</button>
                    </div>
                    <div class="share-preview" id="sharePreview"></div>
                    <button class="copy-btn" id="copyBtn">üìã Copy to Clipboard</button>
                    <button class="copy-btn instagram-btn" id="instagramBtn">üì∏ Save for Instagram</button>
                    <div class="copy-success" id="copySuccess">Copied to clipboard!</div>
                </div>
            </div>
        </div>
    </div>

    <div class="powered-by-section" id="poweredBySection">
        <div class="powered-by-container">
            <h3 class="powered-by-title">Powered by Free Time</h3>
            <p class="powered-by-description">Free Time is an app to help you use your phone more mindfully. Our goal is to help you have less screen time and more free time.</p>
            <a href="https://apps.apple.com/us/app/free-time-mindful-screen-time/id6747683001" class="powered-by-btn">Download Now</a>
        </div>
    </div>

    <footer>
        <div class="container">
            <nav>
                <a href="index.html">Home</a>
                <a href="about.html">About</a>
                <a href="contact.html">Contact</a>
            </nav>
            <p>&copy; 2025 Nicole Kelner LLC. All rights reserved.</p>
        </div>
    </footer>

    <!-- Mobile Number Picker -->
    <div class="picker-overlay" id="pickerOverlay">
        <div class="picker-container">
            <div class="picker-header">
                <span class="picker-title" id="pickerTitle">Select Hours</span>
                <button class="picker-done" id="pickerDone">Done</button>
            </div>
            <div class="picker-wrapper">
                <div class="picker-fade-top"></div>
                <div class="picker-highlight"></div>
                <div class="picker-scroll-container" id="pickerScroll"></div>
                <div class="picker-fade-bottom"></div>
            </div>
        </div>
    </div>

    <!-- Minimal Cookie Consent Banner -->
    <div id="cookieBanner" style="display: none; position: fixed; bottom: 0; left: 0; right: 0; background: rgba(255, 255, 255, 0.98); backdrop-filter: blur(10px); color: #083267; padding: 16px 20px; font-size: 0.95em; z-index: 9999; border-top: 1px solid rgba(93, 172, 179, 0.2);">
        <div style="max-width: 1200px; margin: 0 auto; display: flex; align-items: center; justify-content: space-between; gap: 20px; flex-wrap: wrap;">
            <span style="flex: 1; min-width: 250px;">This site uses cookies. <a href="privacy.html" style="color: #5DACB3; text-decoration: underline;">Learn more</a></span>
            <button id="acceptCookies" style="background: #5DACB3; color: white; border: none; padding: 10px 24px; border-radius: 6px; font-weight: 600; cursor: pointer; font-family: 'Lexend', sans-serif; font-size: 0.95em; transition: background 0.2s;">Accept</button>
        </div>
    </div>

    <script>
        // Mobile hamburger menu
        (function() {
            const hamburger = document.getElementById('hamburger');
            const navLinks = document.getElementById('navLinks');

            if (hamburger) {
                hamburger.addEventListener('click', function() {
                    hamburger.classList.toggle('active');
                    navLinks.classList.toggle('active');
                });

                navLinks.querySelectorAll('a').forEach(link => {
                    link.addEventListener('click', function() {
                        hamburger.classList.remove('active');
                        navLinks.classList.remove('active');
                    });
                });
            }
        })();
    </script>

    <script>
        // Cookie consent handling
        (function() {
            const banner = document.getElementById('cookieBanner');
            const acceptBtn = document.getElementById('acceptCookies');

            if (!localStorage.getItem('cookieConsent')) {
                banner.style.display = 'block';
            }

            acceptBtn.addEventListener('click', function() {
                localStorage.setItem('cookieConsent', 'accepted');
                banner.style.transition = 'opacity 0.3s ease';
                banner.style.opacity = '0';
                setTimeout(function() {
                    banner.style.display = 'none';
                }, 300);
                loadGoogleAnalytics();
            });
        })();
    </script>

    <script>
        // View mode for visualization: 'months' (default) or 'weeks'
        let viewMode = 'years';

        // Share mode: 'years' (default) or 'months'
        let shareMode = 'years';

        // Track if results have been shown
        let resultsShown = false;

        // Mobile detection
        const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);

        // Picker state
        let currentPickerInput = null;
        let currentPickerIndex = null;
        let currentPickerValue = 0;

        function openPicker(input, index, activityName, isDaily) {
            currentPickerInput = input;
            currentPickerIndex = index;
            currentPickerValue = parseFloat(input.value) || 0;

            const maxVal = isDaily ? 24 : 168;
            const step = 0.5;

            document.getElementById('pickerTitle').textContent = `${activityName} (hours)`;

            const scrollContainer = document.getElementById('pickerScroll');
            scrollContainer.innerHTML = '';

            const topSpacer = document.createElement('div');
            topSpacer.style.height = '75px';
            scrollContainer.appendChild(topSpacer);

            for (let i = 0; i <= maxVal; i += step) {
                const option = document.createElement('div');
                option.className = 'picker-option' + (i === currentPickerValue ? ' selected' : '');
                option.textContent = i;
                option.dataset.value = i;
                option.addEventListener('click', function() {
                    document.querySelectorAll('.picker-option').forEach(o => o.classList.remove('selected'));
                    this.classList.add('selected');
                    currentPickerValue = parseFloat(this.dataset.value);
                    this.scrollIntoView({ block: 'center', behavior: 'smooth' });
                });
                scrollContainer.appendChild(option);
            }

            const bottomSpacer = document.createElement('div');
            bottomSpacer.style.height = '75px';
            scrollContainer.appendChild(bottomSpacer);

            scrollContainer.onscroll = function() {
                const containerRect = scrollContainer.getBoundingClientRect();
                const centerY = containerRect.top + containerRect.height / 2;

                let closestOption = null;
                let closestDistance = Infinity;

                document.querySelectorAll('.picker-option').forEach(option => {
                    const optionRect = option.getBoundingClientRect();
                    const optionCenterY = optionRect.top + optionRect.height / 2;
                    const distance = Math.abs(centerY - optionCenterY);

                    if (distance < closestDistance) {
                        closestDistance = distance;
                        closestOption = option;
                    }
                });

                if (closestOption) {
                    document.querySelectorAll('.picker-option').forEach(o => o.classList.remove('selected'));
                    closestOption.classList.add('selected');
                    currentPickerValue = parseFloat(closestOption.dataset.value);
                }
            };

            document.getElementById('pickerOverlay').classList.add('show');

            setTimeout(() => {
                const selected = scrollContainer.querySelector('.selected');
                if (selected) {
                    selected.scrollIntoView({ block: 'center', behavior: 'auto' });
                }
            }, 50);
        }

        function closePicker() {
            if (currentPickerInput && currentPickerIndex !== null) {
                currentPickerInput.value = currentPickerValue;
                activities[currentPickerIndex].hours = currentPickerValue;
                updateHoursFeedbackOnly();
                if (resultsShown) {
                    calculateAndUpdate();
                }
            }
            document.getElementById('pickerOverlay').classList.remove('show');
            currentPickerInput = null;
            currentPickerIndex = null;
        }

        document.getElementById('pickerDone').addEventListener('click', closePicker);
        document.getElementById('pickerOverlay').addEventListener('click', function(e) {
            if (e.target === this) closePicker();
        });

        // Default activities
        let activities = [
            { emoji: 'üò¥', name: 'Sleep', hours: 8, frequency: 'day', isDefault: true },
            { emoji: 'üíº', name: 'Work', hours: 8, frequency: 'day', isDefault: true },
            { emoji: 'üì±', name: 'Phone', hours: 3, frequency: 'day', isDefault: true },
            { emoji: 'üç¥', name: 'Eating', hours: 2, frequency: 'day', isDefault: true },
            { emoji: 'üöó', name: 'Commute', hours: 1, frequency: 'day', isDefault: true },
            { emoji: 'üöø', name: 'Get Ready', hours: 1, frequency: 'day', isDefault: true },
            { emoji: 'üí™', name: 'Exercise', hours: 3, frequency: 'week', isDefault: true },
            { emoji: 'üë´', name: 'Friends', hours: 3, frequency: 'week', isDefault: true },
            { emoji: '‚ù§Ô∏è', name: 'Dates', hours: 2, frequency: 'week', isDefault: true },
            { emoji: 'üè†', name: 'Family', hours: 5, frequency: 'week', isDefault: true },
            { emoji: 'üé®', name: 'Hobbies', hours: 3, frequency: 'week', isDefault: true },
            { emoji: 'üë®‚Äçüç≥', name: 'Cooking', hours: 3, frequency: 'week', isDefault: true },
            { emoji: 'üßπ', name: 'Chores', hours: 2, frequency: 'week', isDefault: true },
            { emoji: 'üì∫', name: 'TV', hours: 7, frequency: 'week', isDefault: true }
        ];

        const availableEmojis = ['üìö', 'üéÆ', 'üé¨', 'üéµ', 'üßò', 'üõÅ', '‚òï', 'üç≥', 'üõí', 'üß†', '‚úçÔ∏è', 'üé®', 'üå≥', 'üèÉ', 'üö¥', 'üèä', '‚öΩ', 'üéæ', 'üßó', 'üé™', 'üé≠', 'üéØ', 'üé≤', 'üÉè', 'üéª', 'üé∏', 'üéπ', 'ü•Å', 'üé§', 'üì∑', 'üîß', 'üå±', 'üêï', 'üêà', 'üë∂', 'üë®‚Äçüë©‚Äçüëß', 'üíë', 'üë•', 'üôè', 'üìø', 'üïØÔ∏è', 'üí≠', 'üìù', 'üíª', 'üñ•Ô∏è', '‚å®Ô∏è', 'üéß', 'üì∫', 'üé•', 'üåÖ', 'üåô', 'üõèÔ∏è', 'ü™•', 'üíÖ', 'üíá', 'üëî', 'üëó', 'üß∫', 'üçø', 'üéÇ', 'üéÑ', '‚úàÔ∏è', 'üèñÔ∏è', '‚õ∑Ô∏è', 'üß©', 'üìñ', 'üóûÔ∏è', 'üí∞', 'üìä', 'üè†', 'üè¢'];

        let selectedDailyEmoji = 'üìö';
        let selectedWeeklyEmoji = 'üìö';
        let customizeMode = false;
        let dailyFormOpen = false;
        let weeklyFormOpen = false;

        function setupEmojiSelector(containerId, selectedEmoji, onSelect) {
            const container = document.getElementById(containerId);
            if (!container) return;
            container.innerHTML = '';

            availableEmojis.forEach(emoji => {
                const option = document.createElement('span');
                option.className = 'emoji-option' + (emoji === selectedEmoji ? ' selected' : '');
                option.textContent = emoji;
                option.onclick = () => {
                    container.querySelectorAll('.emoji-option').forEach(e => e.classList.remove('selected'));
                    option.classList.add('selected');
                    onSelect(emoji);
                };
                container.appendChild(option);
            });
        }

        function setupAllEmojiSelectors() {
            setupEmojiSelector('dailyEmojiSelector', selectedDailyEmoji, (emoji) => { selectedDailyEmoji = emoji; });
            setupEmojiSelector('weeklyEmojiSelector', selectedWeeklyEmoji, (emoji) => { selectedWeeklyEmoji = emoji; });
        }

        function renderActivities() {
            const dailyContainer = document.getElementById('dailyActivitiesContainer');
            const weeklyContainer = document.getElementById('weeklyActivitiesContainer');

            dailyContainer.innerHTML = '';
            weeklyContainer.innerHTML = '';

            activities.forEach((activity, index) => {
                const row = document.createElement('div');
                row.className = 'activity-row';

                const isRemovable = activity.isDefault !== true;
                const isDaily = activity.frequency === 'day';

                row.innerHTML = `
                    <div class="activity-info">
                        <span class="activity-emoji">${activity.emoji}</span>
                        <span class="activity-name">${activity.name}</span>
                    </div>
                    <div class="hours-stepper">
                        <button class="stepper-btn minus" data-index="${index}" data-daily="${isDaily}">‚àí</button>
                        <input type="number"
                               class="activity-hours-input"
                               value="${activity.hours}"
                               min="0"
                               max="${isDaily ? 24 : 168}"
                               step="0.5"
                               ${isMobile ? 'readonly' : ''}
                               data-index="${index}"
                               data-name="${activity.name}"
                               data-daily="${isDaily}">
                        <button class="stepper-btn plus" data-index="${index}" data-daily="${isDaily}">+</button>
                    </div>
                    <span class="hours-label">hours</span>
                    ${isRemovable ? `<button class="btn-cancel" style="padding: 6px 12px; font-size: 0.85em;" onclick="removeActivity(${index})">‚úï</button>` : ''}
                `;

                const input = row.querySelector('input');
                const minusBtn = row.querySelector('.stepper-btn.minus');
                const plusBtn = row.querySelector('.stepper-btn.plus');

                if (isMobile) {
                    input.addEventListener('click', (e) => {
                        openPicker(input, index, activity.name, isDaily);
                    });
                } else {
                    input.addEventListener('input', (e) => {
                        activities[index].hours = parseFloat(e.target.value) || 0;
                        updateHoursFeedbackOnly();
                        if (resultsShown) {
                            calculateAndUpdate();
                        }
                    });
                }

                // Stepper button handlers
                minusBtn.addEventListener('click', (e) => {
                    e.preventDefault();
                    const maxVal = isDaily ? 24 : 168;
                    let newVal = Math.max(0, (activities[index].hours || 0) - 0.5);
                    activities[index].hours = newVal;
                    input.value = newVal;
                    updateHoursFeedbackOnly();
                    if (resultsShown) calculateAndUpdate();
                });

                plusBtn.addEventListener('click', (e) => {
                    e.preventDefault();
                    const maxVal = isDaily ? 24 : 168;
                    let newVal = Math.min(maxVal, (activities[index].hours || 0) + 0.5);
                    activities[index].hours = newVal;
                    input.value = newVal;
                    updateHoursFeedbackOnly();
                    if (resultsShown) calculateAndUpdate();
                });

                if (activity.frequency === 'day') {
                    dailyContainer.appendChild(row);
                } else {
                    weeklyContainer.appendChild(row);
                }
            });

            setupAllEmojiSelectors();
            // Always update hours feedback
            updateHoursFeedbackOnly();
            if (resultsShown) {
                calculateAndUpdate();
            }
        }

        function updateHoursFeedbackOnly() {
            const totalHoursPerDay = activities.reduce((sum, a) => {
                const dailyHours = a.frequency === 'day' ? a.hours : a.hours / 7;
                return sum + dailyHours;
            }, 0);
            updateHoursFeedback(totalHoursPerDay);
        }

        function removeActivity(index) {
            activities.splice(index, 1);
            renderActivities();
        }

        function toggleDailyForm() {
            dailyFormOpen = !dailyFormOpen;
            const form = document.getElementById('addDailyActivityForm');
            const btn = document.getElementById('customizeDailyBtn');

            if (dailyFormOpen) {
                form.classList.remove('hidden');
                btn.textContent = 'Done';
                btn.classList.add('active');
                customizeMode = true;
            } else {
                form.classList.add('hidden');
                btn.textContent = 'Customize';
                btn.classList.remove('active');
                if (!weeklyFormOpen) customizeMode = false;
            }
            renderActivities();
        }

        function toggleWeeklyForm() {
            weeklyFormOpen = !weeklyFormOpen;
            const form = document.getElementById('addWeeklyActivityForm');
            const btn = document.getElementById('customizeWeeklyBtn');

            if (weeklyFormOpen) {
                form.classList.remove('hidden');
                btn.textContent = 'Done';
                btn.classList.add('active');
                customizeMode = true;
            } else {
                form.classList.add('hidden');
                btn.textContent = 'Customize';
                btn.classList.remove('active');
                if (!dailyFormOpen) customizeMode = false;
            }
            renderActivities();
        }

        function addDailyActivity() {
            const name = document.getElementById('dailyActivityName').value.trim();
            const hours = parseFloat(document.getElementById('dailyActivityHours').value) || 0;

            if (!name) {
                alert('Please enter an activity name');
                return;
            }

            activities.push({
                emoji: selectedDailyEmoji,
                name: name,
                hours: hours,
                frequency: 'day',
                isDefault: false
            });

            document.getElementById('dailyActivityName').value = '';
            document.getElementById('dailyActivityHours').value = '1';
            selectedDailyEmoji = 'üìö';
            renderActivities();
            toggleDailyForm();
        }

        function addWeeklyActivity() {
            const name = document.getElementById('weeklyActivityName').value.trim();
            const hours = parseFloat(document.getElementById('weeklyActivityHours').value) || 0;

            if (!name) {
                alert('Please enter an activity name');
                return;
            }

            activities.push({
                emoji: selectedWeeklyEmoji,
                name: name,
                hours: hours,
                frequency: 'week',
                isDefault: false
            });

            document.getElementById('weeklyActivityName').value = '';
            document.getElementById('weeklyActivityHours').value = '1';
            selectedWeeklyEmoji = 'üìö';
            renderActivities();
            toggleWeeklyForm();
        }

        function updateHoursFeedback(totalHours) {
            const feedbackEl = document.getElementById('hoursFeedback');
            const valueEl = document.getElementById('totalHoursValue');
            const noteEl = document.getElementById('hoursFeedbackNote');

            valueEl.textContent = totalHours.toFixed(1) + ' hours/day';

            if (totalHours > 24) {
                feedbackEl.classList.add('over-24');
                const over = (totalHours - 24).toFixed(1);
                noteEl.textContent = ` (${over} hours over, this might be if you are multi-tasking)`;
            } else {
                feedbackEl.classList.remove('over-24');
                const remaining = (24 - totalHours).toFixed(1);
                noteEl.textContent = ` (${remaining} hours free time)`;
            }
        }

        function calculateAndUpdate() {
            const age = parseFloat(document.getElementById('age').value) || 0;
            const yearsRemaining = Math.max(0, 80 - age);
            const weeksRemaining = Math.round(yearsRemaining * 52);
            const monthsRemaining = Math.round(yearsRemaining * 12);

            const totalHoursPerDay = activities.reduce((sum, a) => {
                const dailyHours = a.frequency === 'day' ? a.hours : a.hours / 7;
                return sum + dailyHours;
            }, 0);

            updateHoursFeedback(totalHoursPerDay);

            const activityData = activities.map(activity => {
                const dailyHours = activity.frequency === 'day' ? activity.hours : activity.hours / 7;
                const hoursPerWeek = dailyHours * 7;
                const totalHoursInLife = hoursPerWeek * weeksRemaining;
                const totalWeeks = Math.round((dailyHours / 24) * weeksRemaining);
                const totalMonths = Math.round((dailyHours / 24) * monthsRemaining);
                const yearsSpent = (totalHoursInLife / (24 * 365)).toFixed(1);
                const percentOfLife = ((dailyHours / 24) * 100).toFixed(1);

                return {
                    ...activity,
                    dailyHours,
                    totalWeeks,
                    totalMonths,
                    yearsSpent,
                    percentOfLife,
                    totalHours: totalHoursInLife
                };
            });

            activityData.sort((a, b) => parseFloat(b.yearsSpent) - parseFloat(a.yearsSpent));

            generateInsights(activityData, yearsRemaining, totalHoursPerDay);
            generateEmojis(activityData);
        }

        function generateInsights(activityData, yearsRemaining, totalHoursPerDay) {
            const phoneActivity = activityData.find(a =>
                a.name.toLowerCase().includes('phone') ||
                a.name.toLowerCase().includes('mobile')
            );

            const phoneImpactEl = document.getElementById('phoneImpactText');

            if (phoneActivity) {
                const percentOfLife = phoneActivity.percentOfLife;
                const daysPerYear = ((phoneActivity.dailyHours * 365) / 24).toFixed(1);
                const yearsOfLife = phoneActivity.yearsSpent;
                const phoneHours = phoneActivity.dailyHours;

                // Find other activities for combined comparison
                const friendsActivity = activityData.find(a => a.name.toLowerCase().includes('friend'));
                const familyActivity = activityData.find(a => a.name.toLowerCase().includes('family'));
                const hobbiesActivity = activityData.find(a => a.name.toLowerCase().includes('hobb'));

                // Combined comparison (friends + family + hobbies)
                const combinedHours = (friendsActivity?.dailyHours || 0) +
                                     (familyActivity?.dailyHours || 0) +
                                     (hobbiesActivity?.dailyHours || 0);

                // Get year counts for visual comparison (1 emoji = 1 year)
                const phoneYears = Math.round(parseFloat(phoneActivity.yearsSpent)) || 0;
                const friendsYears = Math.round(parseFloat(friendsActivity?.yearsSpent || 0));
                const familyYears = Math.round(parseFloat(familyActivity?.yearsSpent || 0));
                const hobbiesYears = Math.round(parseFloat(hobbiesActivity?.yearsSpent || 0));

                let combinedInsight = '';
                let emojiComparison = '';

                if (combinedHours > 0 && phoneHours >= combinedHours * 0.9) {
                    if (phoneHours > combinedHours * 1.1) {
                        combinedInsight = `You'll spend <strong>more time on your phone</strong> than you will with friends, family, and hobbies combined.`;
                    } else if (phoneHours >= combinedHours * 0.95) {
                        combinedInsight = `You'll spend <strong>as much time on your phone</strong> as you will with friends, family, and hobbies combined.`;
                    } else {
                        combinedInsight = `You'll spend <strong>almost as much time on your phone</strong> as you will with friends, family, and hobbies combined.`;
                    }

                    // Build emoji visual comparison using actual emojis from activities
                    const phoneEmoji = phoneActivity.emoji || 'üì±';
                    const friendsEmoji = friendsActivity?.emoji || 'üë´';
                    const familyEmoji = familyActivity?.emoji || 'üë®‚Äçüë©‚Äçüëß';
                    const hobbiesEmoji = hobbiesActivity?.emoji || 'üé®';

                    const wrapEmojis = (emoji, count) => Array(count).fill(`<span>${emoji}</span>`).join('');
                    const phoneEmojis = wrapEmojis(phoneEmoji, Math.min(phoneYears, 15));
                    const friendsEmojis = friendsYears > 0 ? wrapEmojis(friendsEmoji, Math.min(friendsYears, 10)) : '';
                    const familyEmojis = familyYears > 0 ? wrapEmojis(familyEmoji, Math.min(familyYears, 10)) : '';
                    const hobbiesEmojis = hobbiesYears > 0 ? wrapEmojis(hobbiesEmoji, Math.min(hobbiesYears, 10)) : '';

                    emojiComparison = `
                        <div class="emoji-comparison">
                            <div class="emoji-comparison-side phone-side">${phoneEmojis}</div>
                            <div class="emoji-comparison-equals">=</div>
                            <div class="emoji-comparison-side combined-side">${friendsEmojis}${familyEmojis}${hobbiesEmojis}</div>
                        </div>
                        <div class="emoji-comparison-legend">1 emoji = 1 year</div>
                    `;
                }

                // Build the HTML
                let html = `You're spending <strong>${percentOfLife}% of your life</strong> on your phone. That's <strong>${yearsOfLife} years of your remaining life.</strong>`;

                if (combinedInsight) {
                    html += `<br><br>${combinedInsight}`;
                    html += emojiComparison;
                }

                html += `<br><br>Some time is well spent like eating delicious food, resting, exercising, and being with loved ones. But is this how you want to spend your free time?`;

                phoneImpactEl.innerHTML = html;
            } else {
                phoneImpactEl.innerHTML = `Add a "Phone" activity to see how much time you're spending on your device.`;
            }
        }

        function generateEmojis(activityData) {
            const container = document.getElementById('emojiContainer');
            container.innerHTML = '';

            const subtitle = document.getElementById('chartSubtitle');
            const subtitles = { years: '1 Emoji = 1 year', months: '1 Emoji = 1 month', weeks: '1 Emoji = 1 week' };
            subtitle.textContent = subtitles[viewMode];

            // Years view: combined emoji grid without labels
            if (viewMode === 'years') {
                // Calculate total emojis first to determine optimal columns for square layout
                const totalEmojis = activityData.reduce((sum, activity) => {
                    return sum + (Math.round(parseFloat(activity.yearsSpent)) || 0);
                }, 0);
                const columns = Math.ceil(Math.sqrt(totalEmojis * 1.5));

                const grid = document.createElement('div');
                grid.className = 'years-emoji-grid';
                grid.style.gridTemplateColumns = `repeat(${columns}, auto)`;

                activityData.forEach(activity => {
                    const count = Math.round(parseFloat(activity.yearsSpent)) || 0;
                    for (let i = 0; i < count; i++) {
                        const emoji = document.createElement('span');
                        emoji.className = 'emoji-week';
                        emoji.textContent = activity.emoji;
                        emoji.title = `${activity.name}: year ${i + 1} of ${count}`;
                        grid.appendChild(emoji);
                    }
                });

                container.appendChild(grid);

                // Add key/legend below the grid
                const key = document.createElement('div');
                key.className = 'years-emoji-key';
                activityData.forEach(activity => {
                    const years = parseFloat(activity.yearsSpent) || 0;
                    const count = Math.round(years);
                    if (count > 0) {
                        const item = document.createElement('span');
                        item.className = 'key-item';
                        item.innerHTML = `<span>${activity.emoji} ${activity.name}</span><span class="key-years">${years.toFixed(1)} yrs</span>`;
                        key.appendChild(item);
                    }
                });
                container.appendChild(key);

                generateShareableText(activityData);
                return;
            }

            // Months/Weeks view: individual activity rows with labels
            activityData.forEach(activity => {
                let count;
                if (viewMode === 'months') {
                    count = activity.totalMonths;
                } else {
                    count = activity.totalWeeks;
                }
                if (count === 0) return;

                const row = document.createElement('div');
                row.className = 'viz-activity-row';

                const label = document.createElement('div');
                label.className = 'viz-activity-label';
                label.innerHTML = `${activity.emoji} ${activity.name} - ${activity.yearsSpent} years of your life (${activity.percentOfLife}%)`;

                const band = document.createElement('div');
                band.className = 'emoji-band';

                const unitLabels = { months: 'month', weeks: 'week' };
                const unitLabel = unitLabels[viewMode];
                for (let i = 0; i < count; i++) {
                    const emoji = document.createElement('span');
                    emoji.className = 'emoji-week';
                    emoji.textContent = activity.emoji;
                    emoji.title = `${activity.name}: ${unitLabel} ${i + 1} of ${count}`;
                    band.appendChild(emoji);
                }

                row.appendChild(label);
                row.appendChild(band);
                container.appendChild(row);
            });

            generateShareableText(activityData);
        }

        function generateShareableText(activityData) {
            const age = parseFloat(document.getElementById('age').value) || 0;

            let shareText = `üìä My Life in Emojis (Age ${age} ‚Üí 80)\n\n`;

            if (shareMode === 'years') {
                // Combined grid format for years
                let allEmojis = [];
                activityData.forEach(activity => {
                    const emojiCount = Math.round(parseFloat(activity.yearsSpent)) || 0;
                    for (let i = 0; i < emojiCount; i++) {
                        allEmojis.push(activity.emoji);
                    }
                });

                // Calculate columns for wider layout (more columns when younger/more emojis)
                const columns = Math.ceil(Math.sqrt(allEmojis.length * 1.5));

                // Format in rows with calculated columns
                for (let i = 0; i < allEmojis.length; i += columns) {
                    shareText += allEmojis.slice(i, i + columns).join('  ') + '\n\n';
                }

                // Add key
                shareText += '\n';
                activityData.forEach(activity => {
                    const count = Math.round(parseFloat(activity.yearsSpent)) || 0;
                    if (count > 0) {
                        shareText += `${activity.emoji} ${activity.name}\n`;
                    }
                });

                shareText += `\n1 emoji = 1 year\n\nCalculate your life at www.findfreetime.com/life`;
            } else {
                // Monthly format with activity rows
                activityData.forEach(activity => {
                    const emojiCount = Math.ceil(parseFloat(activity.yearsSpent) * 12);
                    if (emojiCount === 0) return;

                    const emojiBar = activity.emoji.repeat(emojiCount);

                    shareText += `${activity.name}: ${activity.yearsSpent} years (${activity.percentOfLife}%)\n`;
                    shareText += `${emojiBar}\n\n`;
                });

                shareText += `1 emoji = 1 month\n\nCalculate your life at www.findfreetime.com/life`;
            }

            const sharePreview = document.getElementById('sharePreview');
            sharePreview.textContent = shareText;
        }

        function showResults() {
            document.getElementById('results').style.display = 'block';
            document.getElementById('poweredBySection').style.display = 'block';
            document.getElementById('calculateBtn').textContent = 'Recalculate';
            resultsShown = true;
            calculateAndUpdate();
        }

        // Initialize
        document.getElementById('calculateBtn').addEventListener('click', showResults);
        document.getElementById('age').addEventListener('input', function() {
            if (resultsShown) {
                calculateAndUpdate();
            }
        });

        document.getElementById('ageMinusBtn').addEventListener('click', function() {
            const ageInput = document.getElementById('age');
            const currentVal = parseInt(ageInput.value) || 0;
            if (currentVal > 1) {
                ageInput.value = currentVal - 1;
                if (resultsShown) calculateAndUpdate();
            }
        });

        document.getElementById('agePlusBtn').addEventListener('click', function() {
            const ageInput = document.getElementById('age');
            const currentVal = parseInt(ageInput.value) || 0;
            if (currentVal < 100) {
                ageInput.value = currentVal + 1;
                if (resultsShown) calculateAndUpdate();
            }
        });

        document.getElementById('customizeDailyBtn').addEventListener('click', toggleDailyForm);
        document.getElementById('customizeWeeklyBtn').addEventListener('click', toggleWeeklyForm);
        document.getElementById('cancelDailyBtn').addEventListener('click', function() {
            document.getElementById('dailyActivityName').value = '';
            document.getElementById('dailyActivityHours').value = '1';
            selectedDailyEmoji = 'üìö';
            toggleDailyForm();
        });
        document.getElementById('cancelWeeklyBtn').addEventListener('click', function() {
            document.getElementById('weeklyActivityName').value = '';
            document.getElementById('weeklyActivityHours').value = '1';
            selectedWeeklyEmoji = 'üìö';
            toggleWeeklyForm();
        });
        document.getElementById('addDailyBtn').addEventListener('click', addDailyActivity);
        document.getElementById('addWeeklyBtn').addEventListener('click', addWeeklyActivity);

        document.getElementById('copyBtn').addEventListener('click', async function() {
            const shareText = document.getElementById('sharePreview').textContent;
            const successMsg = document.getElementById('copySuccess');

            try {
                await navigator.clipboard.writeText(shareText);
                successMsg.classList.add('show');
                setTimeout(() => {
                    successMsg.classList.remove('show');
                }, 3000);
            } catch (err) {
                const textArea = document.createElement('textarea');
                textArea.value = shareText;
                textArea.style.position = 'fixed';
                textArea.style.left = '-999999px';
                document.body.appendChild(textArea);
                textArea.select();
                try {
                    document.execCommand('copy');
                    successMsg.classList.add('show');
                    setTimeout(() => {
                        successMsg.classList.remove('show');
                    }, 3000);
                } catch (err) {
                    alert('Failed to copy. Please select and copy manually.');
                }
                document.body.removeChild(textArea);
            }
        });

        document.getElementById('yearsBtn').addEventListener('click', function() {
            viewMode = 'years';
            document.getElementById('yearsBtn').classList.add('active');
            document.getElementById('monthsBtn').classList.remove('active');
            document.getElementById('weeksBtn').classList.remove('active');
            calculateAndUpdate();
        });

        document.getElementById('monthsBtn').addEventListener('click', function() {
            viewMode = 'months';
            document.getElementById('monthsBtn').classList.add('active');
            document.getElementById('yearsBtn').classList.remove('active');
            document.getElementById('weeksBtn').classList.remove('active');
            calculateAndUpdate();
        });

        document.getElementById('weeksBtn').addEventListener('click', function() {
            viewMode = 'weeks';
            document.getElementById('weeksBtn').classList.add('active');
            document.getElementById('yearsBtn').classList.remove('active');
            document.getElementById('monthsBtn').classList.remove('active');
            calculateAndUpdate();
        });

        document.getElementById('shareMonthsBtn').addEventListener('click', function() {
            shareMode = 'months';
            document.getElementById('shareMonthsBtn').classList.add('active');
            document.getElementById('shareYearsBtn').classList.remove('active');
            if (resultsShown) calculateAndUpdate();
        });

        document.getElementById('shareYearsBtn').addEventListener('click', function() {
            shareMode = 'years';
            document.getElementById('shareYearsBtn').classList.add('active');
            document.getElementById('shareMonthsBtn').classList.remove('active');
            if (resultsShown) calculateAndUpdate();
        });

        // Instagram Share functionality
        document.getElementById('instagramBtn').addEventListener('click', async function() {
            const age = parseFloat(document.getElementById('age').value) || 0;

            // Get current activity data
            const activityData = [];
            activities.forEach(activity => {
                const hoursPerWeek = activity.frequency === 'day'
                    ? activity.hours * 7
                    : activity.hours;
                const yearsRemaining = 80 - age;
                const weeksRemaining = yearsRemaining * 52;
                const totalHours = hoursPerWeek * weeksRemaining;
                const yearsSpent = totalHours / (24 * 365);

                if (yearsSpent > 0) {
                    activityData.push({
                        emoji: activity.emoji,
                        name: activity.name,
                        yearsSpent: yearsSpent.toFixed(1)
                    });
                }
            });

            // Calculate total emojis and columns for wider layout
            const totalEmojis = activityData.reduce((sum, activity) => {
                return sum + (Math.round(parseFloat(activity.yearsSpent)) || 0);
            }, 0);
            const columns = Math.ceil(Math.sqrt(totalEmojis * 1.5));

            // Create the Instagram share container
            let container = document.getElementById('instagramCanvas');
            if (!container) {
                container = document.createElement('div');
                container.id = 'instagramCanvas';
                container.style.position = 'absolute';
                container.style.left = '-9999px';
                document.body.appendChild(container);
            }

            // Build emoji grid HTML
            let emojiGridHTML = '';
            activityData.forEach(activity => {
                const count = Math.round(parseFloat(activity.yearsSpent)) || 0;
                for (let i = 0; i < count; i++) {
                    emojiGridHTML += `<span>${activity.emoji}</span>`;
                }
            });

            // Build legend HTML
            let legendHTML = '';
            activityData.forEach(activity => {
                const years = parseFloat(activity.yearsSpent) || 0;
                if (Math.round(years) > 0) {
                    legendHTML += `
                        <div class="instagram-legend-item">
                            <span class="emoji-name">${activity.emoji} ${activity.name}</span>
                            <span class="emoji-years">${years.toFixed(1)} yrs</span>
                        </div>
                    `;
                }
            });

            container.innerHTML = `
                <div class="instagram-share">
                    <div class="instagram-share-title">My Life in Emojis<br>(Age ${age} ‚Üí 80)</div>
                    <div class="instagram-share-grid" style="grid-template-columns: repeat(${columns}, auto);">
                        ${emojiGridHTML}
                    </div>
                    <div class="instagram-share-legend">
                        ${legendHTML}
                    </div>
                    <div class="instagram-share-footer">findfreetime.com/life</div>
                </div>
            `;

            try {
                const element = container.querySelector('.instagram-share');
                const canvas = await html2canvas(element, {
                    scale: 1,
                    useCORS: true,
                    backgroundColor: null
                });

                // Convert to blob and download
                canvas.toBlob(function(blob) {
                    const url = URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = 'my-life-in-emojis.png';
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);
                    URL.revokeObjectURL(url);
                }, 'image/png');
            } catch (error) {
                console.error('Error generating image:', error);
                alert('Error generating image. Please try again.');
            }
        });

        renderActivities();
    </script>
</body>
</html>
